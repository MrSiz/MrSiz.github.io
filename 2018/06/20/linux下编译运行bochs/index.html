<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    
    <title>linux下编译运行bochs - Philosopher</title>
    <meta charset="utf-8">
    
    <meta name="title" content="linux下编译运行bochs - Philosopher">
    <meta name="description" content="">
    <meta property="og:image" content="/favicon.png">
    <meta property="og:image:width" content="200" />
    <meta property="og:image:height" content="200" />
    <link rel="shortcut icon" href="/favicon.png">
    
    <link rel="stylesheet"
        href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/arduino-light.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/jquery.min.js"></script>
</head>

<body>
    <header class="header">
    <div class="blog-title">
        <a href="/" class="logo">Philosopher</a>
    </div>
    <nav class="navbar">
        <ul class="menu">
            
            
            
            <li class="menu-item">
                
                <a href="/" class="menu-item-link">Home</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/archives" class="menu-item-link">Archives</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/about" class="menu-item-link">About</a>
                
            </li>
            
        </ul>
    </nav>
</header>
    <main class="main">
        <article class="post">
    <div class="post-title">
        <h1 class="title">linux下编译运行bochs</h2>
    </div>
    <div class="post-content">
        <p>记录一下在安装和配置运行bochs的过程中遇见的问题，以及解决办法。</p>
<h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><ul>
<li>ubuntu 16.04</li>
<li>bochs 2.6.9</li>
</ul>
<h2 id="问题及解决办法"><a href="#问题及解决办法" class="headerlink" title="问题及解决办法"></a>问题及解决办法</h2><p>1.<code>gui/libgui.a(x.o): undefined reference to symbol &#39;XSetForeground&#39;</code><br>解决：控制台下输入<code>sudo apt-get install xorg-dev</code></p>
<p>2.<code>X11/Xlib.h: No such file or directory</code><br>解决：控制台下输入<code>sudo apt-get install libx11-dev</code><br><a id="more"></a><br>3.<code>&gt;&gt;PANIC&lt;&lt; bochsrc.txt:13: keyboard directive malformed.</code><br>解决：在配置文件 <strong>bochsrc.txt</strong> 中，设置<code>keyboard: keymap=/home/mrsiz/bochs/share/bochs/keymaps/x11-pc-de.map</code>   </p>
<p>4.<code>&gt;&gt;PANIC&lt;&lt; bochsrc.txt:17: Bochs is not compiled with gdbstub support</code><br>解决：在最开始用<code>.configure</code>生成MakeFile配置文件的时候，如果没有添加gdb远程调试那个选项，但是又在配置文件中开启了远程调试这个功能，就会报这个错，直接注释掉配置文件中的<code>gdbstub</code>那一行</p>
<p>5.连接时出现了没找到引用的情况<code>undefined reference</code><br>解决：在MakeFile文件中，修改<code>LIBS = -lX11 -lXtst  -lpthread</code>,一般只加这几个需要链接的库就行</p>
<p>6.出现权限问题，比如不能写<br>解决：这个问题的出现是因为bochs这个文件夹是root级别的，当用普通用户权限运行./bochs的时候，因为权限不够就会造成这个问题，所以只要加上sudo就行。  </p>
<p>7.启动盘的创建，在运行bochs的时候，需要有启动盘<br>解决：执行<code>./bximage</code>,差不多可以一路回车，也可以按照提示做简单的自定义修改</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>因为上面出现的问题都是我在解决之后，回过头来写的，所以可能在配置bochs过程中还有其他问题，因为忘记了，所以没有记录下来。在看了网上的相关配置之后，差不多是copy加上略微修改得到一份配置文件 <strong>bochsrc.txt</strong>,放在/bin/目录下，运行./bochs的时候会直接读这个配置文件。内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs undefined">megs: 32<br><br>romimage: file=/home/mrsiz/bochs/share/bochs/BIOS-bochs-latest<br>vgaromimage: file=/home/mrsiz/bochs/share/bochs/VGABIOS-lgpl-latest<br><br>boot: disk <br><br>log: bochs.out<br><br>mouse: enabled=0<br>keyboard: keymap=/home/mrsiz/bochs/share/bochs/keymaps/x11-pc-de.map<br><br>ata0: enabled=1, ioaddr1=0x1f0, ioaddr2=0x3f0, irq=14 <br><br>#gdbstub: enabled=0, port=1234, text_base=0, data_base=0, bass_base=0 <br>ata0-master: type=disk, path=&quot;hd60M.img&quot;, mode=flat<br></code></pre></td></tr></table></figure></p>
<p>因为重点是搭建好一个可编译运行linux内核的环境，所以对于在使用bochs中所遇到的问题，采取的方针是：能正常运行就好。</p>

    </div>
    <div class="post-meta">
        <span class="post-time">2018/06/20</span>
    </div>
</article>

<div class="prev_next">
    <nav id="prev_next">

<div class="prev">
    
    <p>Newer</p>
    <a href="/2020/02/28/基于Ryu的应用开发/"><div class="article-nav-title">基于Ryu的应用开发</div></a>
    
</div>
<div class="next">
    
    <p>Older</p>
    <a href="/2018/04/28/类的内存布局/"><div class="article-nav-title">类的内存布局</div></a>
    
</div>

</nav>
</div>

<div class="post-comment">
    



</div>
    </main>
</body>

</html>